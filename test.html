<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Quiz Test</title>

<script>
const audioBase = 'audio/';
const queueList = [];  // ‡∏Ñ‡∏¥‡∏ß‡∏£‡∏≠‡πÄ‡∏•‡πà‡∏ô
let isPlaying = false;

function enqueueQueue(queueNumber) {
  queueList.push(queueNumber);  // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏Ç‡πâ‡∏≤‡∏Ñ‡∏¥‡∏ß
  if (!isPlaying) {
    playNextInQueue();
  }
}

function playNextInQueue() {
  if (queueList.length === 0) {
    isPlaying = false;
    return;
  }

  const queueNumber = queueList.shift();
  isPlaying = true;

  const path_file = document.getElementById('languageSelect').value === 'eng' ? 'eng_2/' : '';
  const nation = document.getElementById('languageSelect').value === 'eng' ? 'eng_' : 'thai_';
  const files = [`${audioBase}${path_file}${nation}start.mp3`];
  for (const digit of queueNumber) {
    files.push(`${audioBase}${path_file}${nation}${digit}.mp3`);
  }
  if(files.length > 0 && nation === 'thai_') {
    files.push(`${audioBase}${path_file}${nation}end.mp3`);
  }
  let index = 0;
  const audio = new Audio();
  const speed = parseFloat(document.getElementById('speedSelect').value) || 1.04; // ‡∏Ñ‡πà‡∏≤ speed ‡∏à‡∏≤‡∏Å dropdown

  const playNextAudio = () => {
    if (index < files.length) {
      audio.src = files[index++];
      audio.playbackRate = speed;  // ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ
      audio.play().then(() => {
        console.log('üîä Playing at speed:', speed, audio.src);
      }).catch(err => {
        console.error('‚ùå Error:', err);
        playNextAudio();
      });
    } else {
      audio.removeEventListener('ended', playNextAudio);
      playNextInQueue();
    }
  };

  audio.addEventListener('ended', playNextAudio);
  playNextAudio();
}

</script>

</head>
<body>
    <h1>Welcome to the Quiz Test</h1>
    <p>This is a basic HTML template.</p>
    <label>‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß‡πÄ‡∏™‡∏µ‡∏¢‡∏á:
  <select id="speedSelect">
    <option value="0.75">‡∏ä‡πâ‡∏≤</option>
    <option value="1.0" selected>‡∏õ‡∏Å‡∏ï‡∏¥</option>
    <option value="1.15">‡πÄ‡∏£‡πá‡∏ß</option>
    <option value="1.5">‡πÄ‡∏£‡πá‡∏ß‡∏°‡∏≤‡∏Å</option>
  </select>
</label>

 <label>‡∏†‡∏≤‡∏©‡∏≤:
  <select id="languageSelect">
    <option value="thai" selected>‡πÑ‡∏ó‡∏¢</option>
    <option value="eng">‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏©</option>
  </select>
</label>

<input type="number" id="queueInput" placeholder="Enter queue number (0758)" />
<button onclick="enqueueQueue(document.getElementById('queueInput').value)">‡πÄ‡∏•‡πà‡∏ô‡∏Ñ‡∏¥‡∏ß</button>
<button onclick="enqueueQueue('0758')">‡πÄ‡∏•‡πà‡∏ô‡∏Ñ‡∏¥‡∏ß 0758</button>
<button onclick="enqueueQueue('1234')">‡πÄ‡∏•‡πà‡∏ô‡∏Ñ‡∏¥‡∏ß 1234</button>


</body>
</html>